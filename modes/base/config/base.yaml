#config_version=5
#Robotech Pinball Machine

mode:
  start_events: ball_will_start #ball_starting
  stop_events:
    - ball_will_end
    - tilt
  priority: 100

queue_relay_player:
   ball_starting{is_extra_ball == True}:
      post: play_shoot_again_show
      wait_for: shoot_again_show_ended

event_player:
  mode_base_started{player==1 and ball==1 and not is_extra_ball}:
    - play_start_sound
  ball_started:
    - start_skill_shot_mode
  # ball_started.2{current_player.kickback_counter > 0}:
  #   - start_kickback_mode
  diverter_ramp_activating:
    - right_flipper_stronger_enable
    # - ramp_diverter_enable
  diverter_ramp_deactivating{not mode.end_invid_invasion.active}:
    - right_flipper_normal_enable
    #- ramp_diverter_disable
  # mode_base_started:
    #- kickback_disable
    #- ramp_diverter_disable
  ball_save_kickback_save_saving_ball:      # ball save on kickback (that goes straight to right outlane) that goes around orbit to flipper
    - orbit_gate_enable{device.switches.s_up_down_ramp_switch.state==0 and not mode.rand_mode.active and not mode.qualify_annie.active and not mode.qualify_shot_multipliers.active}
    - orbit_gate_disable{not mode.invid_invasion.active}|.5s
  # achievement_invid_invasion_mission_1_state_enabled:
  #   - play_what_is_that_flashing|.5s
  # invid_target_group_hit_complete:
  #   - drop_reset_up|2s
  mode_skill_shot_started:
    - left_flipper_normal_enable
    - ramp_diverter_enable{not mode.qualify_invid_invasion.active}
    - start_spinner_level_1_mode
    - start_pops_level_1_mode
    # - start_pops_level_1_mode
    # - right_flipper_stronger_enable
  # ball_save_default_timer_start:
  #   - right_flipper_normal_enable
  # mode_skill_shot_started.2{(device.achievements.invid_invasion_mission_1.state=="complete" or device.achievements.invid_invasion_mission_1.state=="stopped") and device.achievements.genesis_pit.state=="disabled"}:
  #   - start_pre_qualify_genesis_pit
  mode_skill_shot_stopped.1{device.switches.s_up_down_ramp_switch.state == 1}:
    - ramp_up_active
  # mode_skill_shot_stopped.2{(device.achievements.genesis_pit.state == "completed" or device.achievements.genesis_pit.state == "stopped") and (device.achievements.the_fortress.state == "completed" or device.achievements.the_fortress.state == "stopped") and (device.achievements.big_apple.state == "completed" or device.achievements.big_apple.state == "stopped") and (device.achievements.corg.state != "completed" or device.achievements.corg.state != "stopped")}:
  #   - enable_pre_corg_mode
  mode_qualify_invid_invasion_started:
    - ramp_down_active{device.switches.s_up_down_ramp_switch.state == 0}|1s  #testing
    #- right_flipper_stronger_enable
  # mode_qualify_invid_invasion_stopped:
  #   - right_flipper_normal_enable
  # mode_skill_shot_stopped{mode.qualify_invid_invasion.active}:
  #   - right_flipper_stronger_enable
  rand_annie_combo_hit:
    - team_combo_made
  rand_rook_combo_hit:
    - team_combo_made
  rand_lancer_combo_hit:
    - team_combo_made
  rand_lunk_combo_hit:
    - team_combo_made
  rook_rand_combo_hit:
    - team_combo_made
  rook_annie_combo_hit:
    - team_combo_made
  rook_lunk_combo_hit:
    - team_combo_made
  lunk_rand_combo_hit:
    - team_combo_made
  lunk_annie_combo_hit:
    - team_combo_made
  slide_rand_mode_3rd_kill_slide_removed:
    - restart_main_title|2s
  timer_rand_mode_timer_complete:
    - restart_main_title
  slide_annie_mode_4th_kill_slide_removed:
    - restart_main_title|2s
  timer_annie_mode_timer_complete:
    - restart_main_title
  timer_rook_mode_timer_complete:
    - restart_main_title
  slide_rook_mode_3rd_kill_slide_removed: # {device.achievement.lunk_mode_collect.state != "disabled"}:
    - play_rook_mode_success_not_lunk_started
    - restart_main_title|2s
  timer_lunk_mode_timer_complete:
    - restart_main_title
  # timer_genesis_pit_mode_timer_complete:
  #   - restart_main_title
  hurry_up_mode_start_ramp_completed{current_player.hurry_up_mode_hit_ramp_value > 0}:
    - display_hurry_up_value|.5s
  skill_shot_secret_combo_made:
    - display_skill_shot_secret_combo|.5s
  three_skillshots_award_extra_ball: play_three_skillshots_award_extra_ball_sound:3s
  protoculture_award_extra_ball: play_protoculture_award_extra_ball:1s
  skill_shot_combo_made{current_player.combos_made == 5}:
    - five_combos_award_extra_ball
  team_combo_made{current_player.combos_made == 5}:
    - five_combos_award_extra_ball
  ball_save_qualify_mode_ball_save_saving_ball: play_red_swipe_up_show:1s


timed_switches:
  game_cancel:
    switch_tags: start
    time: 5s
    events_when_active: end_game

achievements:
  rand_mode_collect:
    show_tokens:
      leds: l_rand
    show_when_enabled: on
    show_when_started: flash
    show_when_completed: color_green_on
    show_when_stopped: color_red_on
    enable_events: rand_collected
    events_when_enabled: start_intro_rand_mode
    start_events: mode_rand_mode_started
    stop_events: mode_rand_mode_stopped
    restart_after_stop_possible: false
    complete_events: rand_mode_success
    debug: true
  annie_mode_collect:
    show_tokens:
      leds: l_annie
    show_when_enabled: on
    show_when_started: flash
    show_when_completed: color_green_on
    events_when_enabled: start_annie_mode
    start_events: mode_annie_mode_started
    stop_events: mode_annie_mode_stopped
    show_when_stopped: color_red_on
    enable_events: annie_collected
    restart_after_stop_possible: false
    complete_events: annie_mode_success
    debug: true
  rook_mode_collect:
    show_tokens:
      leds: l_rook
    show_when_enabled: on
    show_when_started: flash
    show_when_completed: color_green_on
    enable_events: rook_collected
    events_when_enabled: start_intro_rook_mode
    start_events: mode_rook_mode_started
    stop_events: mode_rook_mode_stopped
    show_when_stopped: color_red_on
    restart_after_stop_possible: false
    complete_events: rook_mode_success
    debug: true
  lunk_mode_collect:
    show_tokens:
      leds: l_lunk
    show_when_enabled: on
    show_when_started: flash
    show_when_completed: color_green_on
    enable_events: lunk_collected
    events_when_enabled: start_lunk_mode
    start_events: mode_lunk_mode_started
    stop_events: mode_lunk_mode_stopped
    show_when_stopped: color_red_on
    restart_after_stop_possible: false
    complete_events: lunk_mode_success
    debug: true
  invid_invasion_mission_1:
    show_tokens:
      leds: l_mission_1
    show_when_enabled: on
    show_when_started: flash
    show_when_completed: color_green_on
    show_when_stopped: color_red_on
    enable_events: mode_qualify_invid_invasion_started # invid_invasion_mission_ready
    #events_when_started:
    #events_when_completed:
    #events_when_enabled:
    start_events: mode_invid_invasion_started
    stop_events: mode_invid_invasion_stopped #timer_invid_invasion_complete
    restart_after_stop_possible: false
    complete_events: invid_invasion_success #,increase_modes_completed_count
    debug: true
  genesis_pit:
    show_tokens:
      leds: l_mission_2
    show_when_disabled: off #on
    show_when_enabled: off #on
    show_when_selected: on
    show_when_started: flash
    show_when_completed: color_green_on
    show_when_stopped: color_red_on
    enable_events: pre_qualify_a_mode_invid_target_group_hit_complete #mode_qualify_genesis_pit_started
    events_when_started: start_intro_genesis_pit
    #events_when_completed:
    #events_when_enabled:
    #start_events:
    stop_events: mode_genesis_pit_stopped #timer_invid_invasion_complete
    restart_after_stop_possible: false
    complete_events: genesis_pit_success #,increase_modes_completed_count
    select_events: pre_qualify_a_mode_invid_target_group_hit_complete{device.achievements.invid_invasion_mission_1.state == "completed" or device.achievements.invid_invasion_mission_1.state == "stopped"} # {device.counters.pre_qualify_a_mode_invid_target_group_made.value < 4} #mode_invid_invasion_stopped
    debug: true
  the_fortress:
    show_tokens:
      leds: l_mission_3
    show_when_disabled: off #on
    show_when_enabled: off #on
    show_when_selected: on
    show_when_started: flash
    show_when_completed: color_green_on
    show_when_stopped: color_red_on
    enable_events: pre_qualify_a_mode_invid_target_group_hit_complete #pre_qualify_a_mode_invid_target_group_hit_complete # {device.achievements.invid_invasion_mission_1.state != "completed"}
    events_when_started: start_intro_the_fortress
    #events_when_completed:
    #events_when_enabled:
    #start_events:
    stop_events: mode_the_fortress_stopped
    restart_after_stop_possible: false
    complete_events: the_fortress_success
    select_events: pre_qualify_a_mode_invid_target_group_hit_complete{device.achievements.genesis_pit.state == "completed" or device.achievements.genesis_pit.state == "stopped"}
    debug: true
  big_apple:
    show_tokens:
      leds: l_mission_4
    show_when_disabled: off #on
    show_when_enabled: off #on
    show_when_selected: on
    show_when_started: flash
    show_when_completed: color_green_on
    show_when_stopped: color_red_on
    enable_events: pre_qualify_a_mode_invid_target_group_hit_complete #pre_qualify_a_mode_invid_target_group_hit_complete # {device.achievements.invid_invasion_mission_1.state != "completed"}
    events_when_started: start_intro_big_apple
    #events_when_completed:
    #events_when_enabled:
    #start_events:
    stop_events: mode_big_apple_stopped
    restart_after_stop_possible: false
    complete_events: big_apple_success
    select_events: pre_qualify_a_mode_invid_target_group_hit_complete{(device.achievements.genesis_pit.state == "completed" or device.achievements.genesis_pit.state == "stopped") and (device.achievements.the_fortress.state == "completed" or device.achievements.the_fortress.state == "stopped")}
    debug: true
  corg:
    show_tokens:
      leds: l_b20
    show_when_disabled: off #on
    show_when_enabled: color_blue_on
    show_when_started: flash_blue_show
    show_when_completed: color_green_on
    show_when_stopped: color_red_on
    enable_events: corg_mode_qualified
    start_events: mode_corg_mode_started
    stop_events: mode_corg_mode_stopped
    restart_after_stop_possible: false
    complete_events: corg_mode_success
    debug: true

achievement_groups:
  robotech_main_modes:
    achievements:
      - genesis_pit
      - the_fortress
      - big_apple
    auto_select: no
    rotate_right_events: pops_shot_hit
    #select_random_achievement_events: pops_shot_hit
    allow_selection_change_while_disabled: no
    enable_while_no_achievement_started: no
    events_when_all_completed: enable_pre_corg_mode #select_reflex_point
    # show_when_enabled: on
    start_selected_events:
      - start_mode_shot_flashing_hit
    enable_events:
      - mode_qualify_a_mode_started
      - mode_rand_mode_stopped # {mode.qualify_a_mode.active}
      - mode_annie_mode_stopped
      - mode_rand_mode_stopped
      - mode_lunk_mode_stopped
      #- pre_qualify_a_mode_invid_target_group_hit_complete
    disable_events:
      #- mode_qualify_a_mode_stopped
      - mode_genesis_pit_started
      - mode_the_fortress_started
      - mode_big_apple_started
      - mode_intro_rand_mode_started
      - mode_intro_annie_mode_started
      - mode_intro_rand_started
      - mode_lunk_mode_started
    debug: true


extra_balls:
  skillshot_extraball:
    award_events: three_skillshots_award_extra_ball
  protoculture_extraball:
    award_events: protoculture_award_extra_ball
  mystery_extraball:
    award_events:  mystery_award_extra_ball
  combos_extraball:
    award_events: five_combos_award_extra_ball


sequence_shots:
  lancer_shot_sequence:
    switch_sequence:
      - s_spinner
      #- s_right_orbit_rollover
      - s_gate_top_right
    sequence_timeout: 2s
  ramp_reflex_point_sequence:
    switch_sequence:
      - s_back_ramp
      - s_right_lock_kickout
    sequence_timeout: 5s
  ramp_wireform_sequence:
    switch_sequence:
      - s_back_ramp
      - s_wireform_ramp
    sequence_timeout: 2s
  rand_annie_combo:
    event_sequence:
      - rand_shot_group_flashing_rand_hit
      - annie_shot_group_flashing_annie_hit
    sequence_timeout: 3s
  rand_rook_combo:
    event_sequence:
      - rand_shot_group_flashing_rand_hit
      - rook_shot_group_flashing_rook_hit
    sequence_timeout: 3s
  rand_lancer_combo:
    event_sequence:
      - rand_shot_group_flashing_rand_hit
      - lancer_shot_group_flashing_lancer_hit
    sequence_timeout: 4s
  rand_lunk_combo:
    event_sequence:
      - rand_shot_group_flashing_rand_hit
      - lunk_shot_group_unlit_hit
    sequence_timeout: 3s
  rook_rand_combo:
    event_sequence:
      - rook_shot_group_flashing_rook_hit
      - rand_shot_group_flashing_rand_hit
    sequence_timeout: 3s
  rook_annie_combo:
    event_sequence:
      - rook_shot_group_flashing_rook_hit
      - annie_shot_group_flashing_annie_hit
    sequence_timeout: 3s
  rook_lunk_combo:
    event_sequence:
      - rook_shot_group_flashing_rook_hit
      - lunk_shot_group_unlit_hit
    sequence_timeout: 3s
  lunk_rand_combo:
    event_sequence:
      - lunk_shot_group_unlit_hit
      - rand_shot_group_flashing_rand_hit
    sequence_timeout: 3s
  lunk_annie_combo:
    event_sequence:
      - lunk_shot_group_unlit_hit
      - annie_shot_group_flashing_annie_hit
    sequence_timeout: 3s

#-------------------------------------------------------------------------------
slides:
  ball_save_kickback_save_slide:
    widgets:
      - type: text
        text: BALL SAVED!
        font_size: 80
        color: blue
        x: center
        y: center+300
        # z: 120
      - type: video
        video: kickback_save
      - type: text
        text: Return to Battle
        font_size: 80
        color: red
        x: center
        y: center-300
  extra_ball_slide:
    widgets:
      - type: text
        text: EXTRA BALL
        color: red
        font_size: 130
        y: center+50
      # - type: text
      #   text: Keep Shooting
      #   color: red
      #   y: center-50
      #   font_size: 100
  rand_mode_3rd_kill_slide:
    widgets:
      - type: text
        text: INVID DESTROYED
        font_size: 80
        color: blue
        x: center
        y: center+300
        # z: 120
      - type: video
        video: rand_mode_3rd_kill
      - type: text
        text: (rand_mode_score_value)
        font_size: 80
        color: red
        x: center
        y: center-300
        number_grouping: true
        # z: 120
  annie_mode_4th_kill_slide:
    widgets:
      - type: text
        text: INVID DESTROYED
        font_size: 80
        color: blue
        x: center
        y: center+300
        # z: 120
      - type: video
        video: annie_mode_4th_kill
      - type: text
        text: (invid_kill_value)
        font_size: 80
        color: red
        x: center
        y: center-300
        number_grouping: true
        # z: 120
  rook_mode_3rd_kill_slide:
    widgets:
      - type: text
        text: BIKER DEFEATED
        font_size: 80
        color: blue
        x: center
        y: center+300
        # z: 120
      - type: video
        video: rook_mode_3rd_kill
      - type: text
        text: (biker_kill_value)
        font_size: 80
        color: red
        x: center
        y: center-300
        number_grouping: true
        # z: 120

widgets:
  black_rectangle:
    - type: rectangle
      anchor_x: left
      anchor_y: bottom
      x: 0
      y: 0
      z: 1000
      width: 1280
      height: 720
      color: black
  # black_rectangle:
  #   - type: rectangle
  #     anchor_x: left
  #     anchor_y: bottom
  #     x: 15
  #     y: 27
  #     z: 1000
  #     width: 1250
  #     height: 670
  #     color: black
  base_screen_outline_widget:
    - type: line
      points: 10, 20, 10, 700, 1270, 700, 1270, 20, 10, 20
      thickness: 3
      color: red
  base_score_widget:
    - type: text
      text: (score)
      style: score_style_singleplayer
      x: center
      y: center-225
  base_ball_widget:
    - type: line
      points: 580, 700, 580, 650, 700, 650, 700, 700
      thickness: 2
      color: red
    - type: text
      text: BALL (ball)
      y: top - 45
      x: center
      font_size: 30
      color: white
#-------------------------------------------------------------------------------
# HURRY UP WIDGET
#-------------------------------------------------------------------------------
  hurry_up_mode_hit_ramp_value_widget:
    - type: text
      text: HURRY UP AWARDED
      color: yellow
      font_size: 100
      y: center + 50
    - type: text
      text: (hurry_up_value)
      font_size: 100
      color: red
      y: center - 50
      number_grouping: true
#-------------------------------------------------------------------------------
# COMBO WIDGETS
#-------------------------------------------------------------------------------
  skill_shot_combo_widget:
    - type: text
      text: SKILL SHOT COMBO
      color: yellow
      font_size: 100
      y: center + 50
    - type: text
      text: (combo_value)
      font_size: 100
      color: red
      y: center - 50
      number_grouping: true
# SECRET COMBO
  skill_shot_secret_combo_widget:
    - type: text
      text: SECRET SKILL SHOT COMBO
      color: yellow
      font_size: 100
      y: center + 50
    - type: text
      text: (combo_value)
      font_size: 100
      color: red
      y: center - 50
      number_grouping: true
# TEAM COMBO
  team_combo_widget:
    - type: text
      text: TEAM COMBO
      color: orange
      font_size: 100
      y: center + 50
    - type: text
      text: (combo_value)
      font_size: 100
      color: red
      y: center-50
      number_grouping: true
#-------------------------------------------------------------------------------
  ball_saved_widget:
    - type: text
      text: BALL SAVED!!
      color: blue
      font_size: 100
      y: center + 80
    - type: text
      text: Keep Shooting
      color: red
      y: center #- 90
      font_size: 70
  skill_shot_failure:
    - type: text
      text: SKILL SHOT MISSED!
      font_size: 100
      color: red
      y: center + 150
  # ball_save_kickback_save_video:
  #   - type: video
  #     video: kickback_save
  #-----------------------------------------------------------------------------
  # BONUS TEAM MEMBERS WIDGETS
  #-----------------------------------------------------------------------------
  rand_mode_bonus_time_score_widget:
    - type: text
      text: RAND MODE COMPLETE
      color: red
      font_size: 80
      y: center + 100
    - type: text
      text: "BONUS: (rand_mode_bonus_time_score)"
      font_size: 70
      color: yellow
      y: center
      number_grouping: true
  annie_mode_bonus_time_score_widget:
    - type: text
      text: ANNIE MODE COMPLETE
      color: FF8000
      font_size: 80
      y: center + 100
    - type: text
      text: "BONUS: (annie_mode_bonus_time_score)"
      font_size: 70
      color: yellow
      y: center
      number_grouping: true
  rook_mode_bonus_time_score_widget:
    - type: text
      text: ROOK MODE COMPLETE
      color: yellow
      font_size: 80
      y: center + 100
    - type: text
      text: "BONUS: (rook_mode_bonus_time_score)"
      font_size: 70
      color: yellow
      y: center
      number_grouping: true
  lunk_mode_bonus_time_score_widget:
    - type: text
      text: LUNK MODE COMPLETE
      color: green
      font_size: 80
      y: center + 100
    - type: text
      text: "BONUS: (lunk_mode_bonus_time_score)"
      font_size: 70
      color: yellow
      y: center
      number_grouping: true
#-------------------------------------------------------------------------------
# SKILL SHOT SUCCESS DISPLAY WIDGETS
#-------------------------------------------------------------------------------
# RAND SKILL SHOT
  skill_shot_rand_display_widgets:
    - type: text
      text: SKILL SHOT SUCCESS!
      font_size: 80
      color: blue
      x: center
      y: center+300
    - type: video
      video: skill_shot_rand
    - type: text
      text: (skill_shot_value)
      font_size: 80
      color: red
      x: center
      y: center-290
      number_grouping: true
# ROOK SKILL SHOT
  skill_shot_rook_display_widgets:
    - type: text
      text: SKILL SHOT SUCCESS!
      font_size: 80
      color: blue
      x: center
      y: center+300
    - type: video
      video: skill_shot_rook
    - type: text
      text: (skill_shot_value)
      font_size: 80
      color: red
      x: center
      y: center-290
      number_grouping: true
# TOP SAUCER SKILL SHOT
  skill_shot_top_saucer_display_widgets:
    - type: text
      text: SKILL SHOT SUCCESS!
      font_size: 80
      color: blue
      x: center
      y: center+300
    # - type: video
    #   video:
    - type: text
      text: (skill_shot_value)
      font_size: 80
      color: red
      x: center
      y: center-290
      number_grouping: true
# TOP LANES SKILL SHOT
  skill_shot_lanes_display_widgets:
    - type: text
      text: SKILL SHOT SUCCESS!
      font_size: 80
      color: blue
      x: center
      y: center+300
    - type: video
      video: skill_shot_lanes
    - type: text
      text: (skill_shot_value)
      font_size: 80
      color: red
      x: center
      y: center-290
      number_grouping: true
# SDF SKILL SHOT
  skill_shot_sdf_display_widgets:
    - type: text
      text: SKILL SHOT SUCCESS!
      font_size: 80
      color: blue
      x: center
      y: center+300
    - type: video
      video: skill_shot_sdf
    - type: text
      text: (skill_shot_value)
      font_size: 80
      color: red
      x: center
      y: center-290
      number_grouping: true
# INVID SKILL SHOT
  skill_shot_invid_display_widgets:
    - type: text
      text: SKILL SHOT SUCCESS!
      font_size: 80
      color: blue
      x: center
      y: center+300
    - type: video
      video: skill_shot_invid
    - type: text
      text: (skill_shot_value)
      font_size: 80
      color: red
      x: center
      y: center-290
      number_grouping: true
# SUPER SKILL SHOT
  skill_shot_super_display_widgets:
    - type: text
      text: SKILL SHOT SUCCESS!
      font_size: 80
      color: blue
      x: center
      y: center+300
    - type: video
      video: skill_shot_sdf
    - type: text
      text: (skill_shot_value)
      font_size: 80
      color: red
      x: center
      y: center-290
      number_grouping: true
# SECRET (RAMP) SKILL SHOT
  skill_shot_secret_display_widgets:
    - type: text
      text: SKILL SHOT SUCCESS!
      font_size: 80
      color: blue
      x: center
      y: center+300
      # - type: video
      #   video:
    - type: text
      text: (skill_shot_value)
      font_size: 80
      color: red
      x: center
      y: center-290
      number_grouping: true
# TOP TARGET SKILL SHOT
  skill_shot_top_target_display_widgets:
    - type: text
      text: SKILL SHOT SUCCESS!
      font_size: 80
      color: blue
      x: center
      y: center+300
      # - type: video
      #   video:
    - type: text
      text: (skill_shot_value)
      font_size: 80
      color: red
      x: center
      y: center-290
      number_grouping: true
# SHATZ SKILL SHOT
  shatz_skill_shot_success:
    # - type: text
    #   text: (SHATZ)
    #   font_size: 80
    #   color: blue
    #   y: center + 250
    - type: text
      text: (SHATZ) SKILL SHOT SUCCESS
      font_size: 80
      color: blue
      x: center
      y: center+300
      # - type: video
      #   video:
    - type: text
      text: (skill_shot_value)
      font_size: 80
      color: red
      x: center
      y: center-290
      number_grouping: true

#_______________________________________________________________________________
#_______________________________________________________________________________

widget_player:
  mode_base_started:
    base_screen_outline_widget:
      slide: base_slide
      priority: 101
    base_score_widget:
      slide: base_slide
      priority: 102
    base_ball_widget:
      slide: base_slide
      priority: 103
  ball_save_default_saving_ball:
    ball_saved_widget:
      action: add
      widget_settings:
        expire: 2s
        z: 115
  ball_save_invid_invasion_multiball_saving_ball:
    ball_saved_widget:
      action: add
      widget_settings:
        expire: 2s
        z: 115
      # expire: 2s
      # priority: 1200
  skill_shot_missed:
    skill_shot_failure:
      action: add
      widget_settings:
        expire: 1.5s
        z: 110
  # ball_save_kickback_save_saving_ball:
  #   ball_save_kickback_save_video:
  #     action: add
  #     widget_settings:
  #       expire: 3s
  #       z: 120
#-------------------------------------------------------------------------------
# HURRY UP DISPLAY VALUE
#-------------------------------------------------------------------------------
# START MODE HURRY UP
  display_hurry_up_value:
    hurry_up_mode_hit_ramp_value_widget:
      action: add
      #target: window
      widget_settings:
        expire: 3s
        z: 111
#-------------------------------------------------------------------------------
# COMBOS
#-------------------------------------------------------------------------------
# SKILL SHOT COMBO
  skill_shot_combo_made:
    skill_shot_combo_widget:
      action: add
      widget_settings:
        expire: 2s
        z: 9999
# SECRET COMBO
  display_skill_shot_secret_combo:
    skill_shot_secret_combo_widget:
      action: add
      widget_settings:
        expire: 2s
        z: 9999
# TEAM COMBO
  team_combo_made:
    team_combo_widget:
      action: add
      widget_settings:
        expire: 2s
        #z: 110
        z: 9999
#-------------------------------------------------------------------------------
  slide_rand_mode_3rd_kill_slide_removed:
    rand_mode_bonus_time_score_widget:
      action: add
      widget_settings:
        expire: 3s
        z: 9999 #110
  slide_annie_mode_4th_kill_slide_removed:
    annie_mode_bonus_time_score_widget:
      action: add
      widget_settings:
        expire: 3s
        z: 110
  slide_rook_mode_3rd_kill_slide_removed:
    rook_mode_bonus_time_score_widget:
      action: add
      widget_settings:
        expire: 5s
        z: 110
#-------------------------------------------------------------------------------
# SKILL SHOT SUCCESS DISPLAY WIDGETS ON SCREEN
#-------------------------------------------------------------------------------
# RAND SKILL SHOT
  left_saucer_skill_flashing_hit:
    black_rectangle:
      action: add
      priority: 110
      widget_settings:
        expire: 4s
    skill_shot_rand_display_widgets:
      action: add
      priority: 111
      widget_settings:
        expire: 4s
        z: 1100
# ROOK SKILL SHOT
  right_saucer_skill_flashing_hit:
    black_rectangle:
      action: add
      priority: 112
      widget_settings:
        expire: 4s
    skill_shot_rook_display_widgets:
      action: add
      priority: 113
      widget_settings:
        expire: 4s
        z: 1100
# TOP SAUCER SKILL SHOT
  top_saucer_skill_flashing_hit:
    black_rectangle:
      action: add
      priority: 114
      widget_settings:
        expire: 4s
    skill_shot_top_saucer_display_widgets:
      action: add
      priority: 115
      widget_settings:
        expire: 4s
        z: 1100
# TOP LANES SKILL SHOT
  top_lanes_skill_flashing_hit:
    black_rectangle:
      action: add
      priority: 116
      widget_settings:
        expire: 4s
    skill_shot_lanes_display_widgets:
      action: add
      priority: 117
      widget_settings:
        expire: 4s
        z: 1100
# SDF SKILL SHOT
  sdf_skill_group_flashing_hit:
    black_rectangle:
      action: add
      priority: 118
      widget_settings:
        expire: 4s
    skill_shot_sdf_display_widgets:
      action: add
      priority: 119
      widget_settings:
        expire: 4s
        z: 1100
# INVID SKILL SHOT
  invid_targets_skill_flashing_hit:
    black_rectangle:
      action: add
      priority: 120
      widget_settings:
        expire: 4s
    skill_shot_invid_display_widgets:
      action: add
      priority: 121
      widget_settings:
        expire: 4s
        z: 1100
# SUPER SKILL SHOT
  super_skill_shot_flashing_hit:
    black_rectangle:
      action: add
      priority: 122
      widget_settings:
        expire: 4s
    skill_shot_super_display_widgets:
      action: add
      priority: 123
      widget_settings:
        expire: 4s
        z: 1100
# SECRET (RAMP) SKILL SHOT
  secret_skill_shot_flashing_hit:
    black_rectangle:
      action: add
      priority: 124
      widget_settings:
        expire: 4s
    skill_shot_secret_display_widgets:
      action: add
      priority: 125
      widget_settings:
        expire: 4s
        z: 1100
# TOP TARGET SKILL SHOT
  top_target_skill_group_flashing_hit:
    black_rectangle:
      action: add
      priority: 126
      widget_settings:
        expire: 4s
    skill_shot_top_target_display_widgets:
      action: add
      priority: 127
      widget_settings:
        expire: 4s
        z: 1100
# SHATZ SKILL SHOT
  shatz_skill_shot_made:
    black_rectangle:
      action: add
      priority: 128
      widget_settings:
        expire: 4s
    shatz_skill_shot_success:
      action: add
      priority: 129
      widget_settings:
        expire: 4s
        z: 1100
#_______________________________________________________________________________
#_______________________________________________________________________________

slide_player:
  ball_save_kickback_save_saving_ball:
    ball_save_kickback_save_slide:
      expire: 4s
      priority: 9999
  mode_base_started:
    base_slide
  # ball_starting{is_extra_ball}:
  #   extra_ball_slide:
  #     expire: 3s
  #     priority: 1199
  rand_mode_success:
    rand_mode_3rd_kill_slide:
      expire: 4s
      #priority: 2201
  annie_mode_success:
    annie_mode_4th_kill_slide:
      expire: 10s
      #priority: 2201
  rook_mode_success:
    rook_mode_3rd_kill_slide:
      expire: 6s
      #priority: 2201


light_player:
  mode_base_started:
    gi_string:
      color: on
  mode_base_stopped:
    gi_string:
      color: off
  turn_gi_on:
    gi_string:
      color: on
    # playfield:
    #   color: off
    #   priority: 9900


show_player:
  play_shoot_again_show:
    shoot_again_show:
      loops: 0
      events_when_stopped: shoot_again_show_ended
  s_right_orbit_rollover_active:
    fast_flash_show:
      loops: 3
      speed: 30
      show_tokens:
        leds: rorbit_rollover
        color: red
  s_left_rollover_active:
    fast_flash_show:
      loops: 3
      speed: 30
      show_tokens:
        leds: llock_rollover
        color: red
  s_right_rollover_active:
    fast_flash_show:
      loops: 3
      speed: 30
      show_tokens:
        leds: rlock_rollover
        color: red
  extra_ball_awarded:
    on:
      key: extraball_awarded_show
      show_tokens:
        leds: l_shoot_again
  ball_starting{current_player.extra_balls > 0}:
    on:
      key: extraball_awarded_show
      show_tokens:
        leds: l_shoot_again
  mystery_targets_rollover_group_hit_complete:
    mystery_shots_complete:
      loops: 4
      speed: 10
  invid_target_group_hit_complete:
    invid_targets_complete:
      show_tokens:
        color: red
  pre_qualify_a_mode_invid_target_group_hit_complete:
    invid_targets_complete:
      show_tokens:
        color: red
  lunk_shot_group_lit_complete:
    sdf_bank_complete:
      loops: 3
      speed: 10
      show_tokens:
        color: 654321
      priority: 1610
    brown_swipe_left_show:
      priority: 9999
      loops: 0
      speed: 15
  top_lanes_skill_flashing_hit:
    skill_shot_top_lanes_hit_show:
      priority: 9999
      loops: 0
      speed: 10
  sdf_skill_group_flashing_hit:
    skill_shot_sdf_hit_show:
      priority: 9999
      loops: 0
      speed: 15
  invid_targets_skill_flashing_hit:
    skill_shot_invid_targets_hit_show:
      priority: 9999
      loops: 0
      speed: 25
  left_saucer_skill_saucer_targets_skill_flashing_hit:
    skill_shot_left_saucer_hit_show2:
      priority: 9999
      loops: 0
      speed: 15
  right_saucer_skill_saucer_targets_skill_flashing_hit:
    skill_shot_top_saucer_hit_show: #skill_shot_right_saucer_hit_show:
      priority: 9999
      loops: 0
      speed: 15
  top_saucer_skill_saucer_targets_skill_flashing_hit:
    skill_shot_top_saucer_hit_show:
      priority: 9999
      loops: 0
      speed: 15
  secret_skill_shot_flashing_hit:
    secret_skill_shot_hit_show:
      key: secret_skill_shot_show
      priority: 9999
      loops: 0
      speed: 10
  super_skill_shot_flashing_hit:
    secret_skill_shot_hit_show:
      key: super_skill_shot_show
      priority: 9999
      loops: 0
      speed: 15
  top_target_skill_group_flashing_hit:
    top_target_skill_shot_hit_show:
      priority: 9999
      loops: 0
      speed: 15
  rand_mode_invid_shot_group_4_flashing_hit:
    rand_mode_invid_shot_group_hit_show:
      key: rand_mode_invid_shot_group_4_show
      priority: 9999
      loops: 0
      speed: 30
    gi_flicker:
      loops: 0
      events_when_stopped: turn_gi_on
  skill_shot_combo_made:
    skill_shot_combo_show:
      priority: 9999
      loops: 5
      speed: 40
    gi_off_sec:
      loops: 0
  diverter_ramp_activating:
    pulse_led_show:
      key: right_flipper_stronger_show
      loops: -1
      speed: 1
      show_tokens:
        color: white
        leds: l_ramp_flasher
  diverter_ramp_deactivating:
    right_flipper_stronger_show:
      action: stop
################################################################################
  rand_annie_combo_hit:
    team_combo_show:
      priority: 9999
      loops: 5
      speed: 40
      show_tokens:
        color: FF8000
    gi_off_sec:
      loops: 0
  rand_rook_combo_hit:
    team_combo_show:
      priority: 9999
      loops: 5
      speed: 40
      show_tokens:
        color: yellow
    gi_off_sec:
      loops: 0
  rand_lancer_combo_hit:
    team_combo_show:
      priority: 9999
      loops: 5
      speed: 40
      show_tokens:
        color: 2E0854
    gi_off_sec:
      loops: 0
  rand_lunk_combo_hit:
    team_combo_show:
      priority: 9999
      loops: 5
      speed: 40
      show_tokens:
        color: 654321
    gi_off_sec:
      loops: 0
################################################################################
  rook_rand_combo_hit:
    team_combo_show:
      priority: 9999
      loops: 5
      speed: 40
      show_tokens:
        color: red
    gi_off_sec:
      loops: 0
  rook_annie_combo_hit:
    team_combo_show:
      priority: 9999
      loops: 5
      speed: 40
      show_tokens:
        color: FF8000
    gi_off_sec:
      loops: 0
  rook_lunk_combo_hit:
    team_combo_show:
      priority: 9999
      loops: 5
      speed: 40
      show_tokens:
        color: 654321
    gi_off_sec:
      loops: 0
################################################################################
  lunk_rand_combo_hit:
    team_combo_show:
      priority: 9999
      loops: 5
      speed: 40
      show_tokens:
        color: red
    gi_off_sec:
      loops: 0
  lunk_annie_combo_hit:
    team_combo_show:
      priority: 9999
      loops: 5
      speed: 40
      show_tokens:
        color: FF8000
    gi_off_sec:
      loops: 0
  kickback_kickback_main_fired:
    red_kickback_show:
      priority: 9999
      loops: 0
      speed: 80
    gi_flicker:
      loops: 0
      events_when_stopped: turn_gi_on
  #ball_save_qualify_mode_ball_save_saving_ball:
  play_red_swipe_up_show:
    red_swipe_up_show:
      priority: 9999
      loops: 0
      speed: 30


variable_player:
#  tech_lanes_default_lit_complete:
#    score: 10000
  # spinner_shot_hit:
  #   score: 100 * current_player.pf_multiplier
  slings_shot_hit:
    score: 10 * current_player.pf_multiplier
  # s_top_target_active:
  #   score: 1000
  s_right_orbit_rollover_active:
    score: 1000 * current_player.pf_multiplier
  s_right_rollover_active:
    score: 1000 * current_player.pf_multiplier
  s_left_rollover_active:
    score: 1000 * current_player.pf_multiplier
  # s_s_target_active:
  #   score: 1000
  # s_d_target_active:
  #   score: 1000
  # s_f_target_active:
  #   score: 1000
  # sdf_bank_default_lit_complete:
  #   score: 10000
  # s_left_target_active:
  #   score: 250 * current_player.pf_multiplier
  # s_middle_target_active:
  #   score: 1000 * current_player.pf_multiplier
  # s_right_target_active:
  #   score: 1000 * current_player.pf_multiplier
  # s_right_drop_target_active:
  #   score: 1000 * current_player.pf_multiplier
  # s_middle_drop_target_active:
  #   score: 1000 * current_player.pf_multiplier
  # s_left_drop_target_active:
  #   score: 1000 * current_player.pf_multiplier
  invid_target_group_hit_complete:
    score: 10000 * current_player.pf_multiplier
  s_right_top1_rubber_active:
    score: 50 * current_player.pf_multiplier
  s_right_top2_rubber_active:
    score: 50 * current_player.pf_multiplier
  s_middle_right_rubber_active:
    score: 50 * current_player.pf_multiplier
  s_lower_right_rubber_active:
    score: 50 * current_player.pf_multiplier
  s_left_top_rubber_active:
    score: 50 * current_player.pf_multiplier
  s_left_top_rubber2_active:
    score: 50 * current_player.pf_multiplier
  s_left_middle_rubber_active:
    score: 50 * current_player.pf_multiplier
  s_left_bottom_rubber_active:
    score: 50 * current_player.pf_multiplier
  s_left_lock_kickout_active:
    score: (1000 * current_player.rand_shot_multiplier) * current_player.pf_multiplier
  s_right_lock_kickout_active:
    score: (1000 * current_player.rook_shot_multiplier) * current_player.pf_multiplier
  s_top_lock_kickout_active:
    score: 1000 * current_player.pf_multiplier
  team_combo_made:
    combo_value:
      int: (10000 + (current_player.combos_made * 1250)) * current_player.pf_multiplier
      action: set
    score: (10000 + (current_player.combos_made * 1250)) * current_player.pf_multiplier
    combos_made: 1
  achievement_invid_invasion_mission_1_state_completed:
    modes_completed: 1
  achievement_genesis_pit_state_completed:
    modes_completed: 1
  achievement_the_fortress_state_completed:
    modes_completed: 1
  achievement_big_apple_state_completed:
    modes_completed: 1
  achievement_rand_mode_collect_state_completed:
    modes_completed: 1
  achievement_annie_mode_collect_state_completed:
    modes_completed: 1
  achievement_rook_mode_collect_state_completed:
    modes_completed: 1
  achievement_lunk_mode_collect_state_completed:
    modes_completed: 1
  achievement_corg_state_completed:
    modes_completed: 1

shows:
  gi_off_sec:
    - lights:
        gi_string: off
      duration: .4s
  gi_flicker:
    - lights:
        gi_string: off
      duration: .1s
    - lights:
        gi_string: on
      duration: .1s
    - lights:
        gi_string: off
      duration: .1s
    - lights:
        gi_string: on
      duration: .1s
    - lights:
        gi_string: off
      duration: .1s
    # - lights:
    #     gi_string: on
    #   duration: .1s
    # - lights:
    #     gi_string: off
    #   duration: .1s
  shoot_again_show:
    - duration: 2
      slides:
        shoot_again_slide:
          widgets:
            - type: text
              text: PLAYER (number)
              color: blue
              font_size: 120
              y: center + 90
            - type: text
              text: Shoot Again
              color: red
              y: center - 10
              font_size: 90

shots:
  spinner_shot:
    switch: s_spinner
  slings_shot:
    switch:
      - s_right_slingshot
      - s_left_slingshot
  pops_shot:
    switch:
      - s_top_r_pop_bumper
      - s_top_l_pop_bumper
      - s_bottom_r_pop_bumper
      - s_bottom_l_pop_bumper

sound_player:
  #ball_started{player==1 and ball==1}:
  sdf_skill_group_hit: sdf_target_sound
  play_start_sound:
    start:
      action: play
  # play_what_is_that_flashing:
  #   what_is_that_flashing:
  #     action: play
  s_plunger_lane_inactive: firepower_launch_sound
  slings_shot_hit: sling_sound
  #mode_base_started:
  #mode_skill_shot_started:
  mode_skill_shot_started:
    main_title:
      action: play
      loops: -1
      #mode_end_action: stop
  restart_main_title:
    main_title:
      action: play
      loops: -1
  mode_base_stopping:
    main_title:
      action: stop
  mode_intro_invid_invasion_starting:
    main_title:
      action: stop
    alien_attack:
      action: play
      loops: -1
  mode_intro_genesis_pit_starting:
    main_title:
      action: stop
  mode_intro_genesis_pit_stopped:
    genesis_pit_zentraedi_theme:
      action: play
      loops: -1
  mode_genesis_pit_stopping:
    genesis_pit_zentraedi_theme:
      action: stop
  mode_intro_the_fortress_starting:
    main_title:
      action: stop
  mode_intro_big_apple_starting:
    main_title:
      action: stop
  mode_invid_invasion_stopping:
    alien_attack:
      action: stop
  mode_intro_rand_mode_started:
    main_title:
      action: stop
  mode_rand_mode_stopping:
    rand_mode_cyclone_theme:
      action: stop
  mode_intro_rook_mode_started:
    main_title:
      action: stop
  mode_rook_mode_stopping:
    rook_mode_confrontation:
      action: stop
  mode_intro_annie_mode_started:
    main_title:
      action: stop
  mode_intro_corg_mode_started:
    main_title:
      action: stop
  mode_annie_mode_stopping:
    annie_mode_the_15th_squadron:
      action: stop
  mode_lunk_mode_started:
    main_title:
      action: stop
    lunk_mode_showdown:
      action: play
      loops: -1
  mode_lunk_mode_stopping:
    lunk_mode_showdown:
      action: stop
  ball_save_default_saving_ball:
    come_back_my_scott:
      action: play
  slide_rand_mode_3rd_kill_slide_removed:
    rand_mode_success:
      action: play
      #priority: 9999
  slide_annie_mode_4th_kill_slide_removed:
    annie_mode_success:
      action: play
      #priority: 9999
  play_rook_mode_success_not_lunk_started:
    rook_mode_success_not_lunk_started:
      action: play
      #priority: 9999
  team_combo_made:
    combo:
      action: play
  ball_save_kickback_save_saving_ball{game.balls_in_play == 1}:
    return_to_battle:
      action: play
      #priority: 9999
  mystery_targets_rollover_group_hit_complete:
    #afm_increase_bonus_multiplier:
    mystery_is_lit_voice:
      action: play
      #priority: 9999
  play_shoot_again_show:
    afm_shoot_again:
      action: play
  play_three_skillshots_award_extra_ball_sound:
    SST_extra_ball:
      action: play
      #priority: 9999
  play_protoculture_award_extra_ball:
    jm_extra_ball:
      action: play
  top_target_skill_group_flashing_hit:
    collect_protoculture:
      action: play
      loops: 3
  ball_save_qualify_mode_ball_save_saving_ball:
    T2_dont_move:
      action: play
  counter_lancer_hit_counter_hit{count <= 4}:
    qualify_lancer_sounds:
      action: play
      #priority: 9999
  counter_lancer_hit_counter_hit{count == 5}:
    scott_yellow_dancer:
      action: play
      #priority: 9999
  mode_spinner_level_2_started:
    spinner_level_2:
      action: play
      #priority: 9999
  mode_spinner_level_3_started:
    spinner_level_3:
      action: play
      #priority: 9999
  mode_spinner_super_started:
    super_spinner:
      action: play
      #priority: 9999
  mode_pops_level_2_started:
    pops_level_2:
      action: play
  mode_pops_level_3_started:
    pops_level_3:
      action: play
  mode_pops_super_started:
    super_pops:
      action: play
